(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{164:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),a("p",[t._v("首先还是废话一下，讲下自己的对苹果 keyboard 抬升文档实现原理的见解：")]),t._m(4),t._m(5),t._m(6),a("p",[t._v("详情请看："),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/scrollTo",target:"_blank",rel:"noopener noreferrer"}},[t._v("window.scrollTo"),a("OutboundLink")],1)]),t._m(7),a("p",[t._v("至于 WKWebview 到底出了什么问题，我暂时没时间去研究，这边就标记一个 TODO 吧：）")]),t._m(8)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"ios12-wkwebview-keyboard-对-html-文档的影响及解决"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios12-wkwebview-keyboard-对-html-文档的影响及解决","aria-hidden":"true"}},[this._v("#")]),this._v(" IOS12 WKWebview Keyboard 对 HTML 文档的影响及解决")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[this._v("#")]),this._v(" 前言:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("我们知道在 IOS11 和 10，WKWebview 的行为都是键盘出现抬升文档，键盘消失文档位置恢复。")]),s("p",[this._v("而在 IOS12 中，WKWebview 的 KeyBoard 只做了出现抬升而不做消失恢复，对此我只能认为是一个 BUG。")]),s("p",[this._v("不过奇怪的是，在 Safari 中，所有的键盘抬升和消失对文档的行为都是正常的。")]),s("p",[this._v("其实这个问题也不应该由前端来解决，不过 IOS 的同学现在都在一脸懵逼中，我们先把这个窟窿临时修补一下吧。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"解决："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决：","aria-hidden":"true"}},[this._v("#")]),this._v(" 解决：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("在 keyboard 升起的时候，Webview 的高度提高一个 Keyboard 的高度，然后在原生的层面上去获取当前点击的位置，计算出文档的高度，如果在设定的水平线上，那么就不做抬升操作，如果在水平线下，那就做抬升操作，抬升的高度和表单元素距离顶部的高度有关。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("文档抬升上去了下不来，那么有没有办法重置文档的位置呢？\n我在 MDN 上搜了一下 Scroll 相关的函数帮助文档重置/恢复原位，搜到了"),s("code",[this._v("window.scrollTo")]),this._v("：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("window"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("scrollTo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" coord"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" coord"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nwindow"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("scrollTo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 设置滚动行为改为平滑的滚动")]),t._v("\nwindow"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("scrollTo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  top"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  behavior"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'smooth'")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("因为我们的表单可输入内容的元素只有 input，所以只是在 input 失焦的时候就调用"),s("code",[this._v("window.scrollTo(0,0)")]),this._v("即可。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("Tips：KeyBoard 那个完成按钮事件我们前端是无法捕获的，Safari 不存在这个问题无需关注，而如果是以 Web 页面为主的 HybridApp，建议跟原生沟通，让原生监测到这个完成按钮点击事件然后调用你设定好的函数，内执行 window.scrollTo 方法。")])])}],!1,null,null,null);e.options.__file="README.md";s.default=e.exports}}]);